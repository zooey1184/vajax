!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define("vxajax",[],o):"object"==typeof exports?exports.vxajax=o():e.vxajax=o()}("undefined"!=typeof self?self:this,function(){return function(e){function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}var t={};return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},o.p="/dist/",o(o.s=0)}([function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n={};n.install=function(e){function o(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST",t=null;if("POST"==o){var n=new FormData,r=[],a=!0,s=!1,l=void 0;try{for(var i,d=Object.keys(e)[Symbol.iterator]();!(a=(i=d.next()).done);a=!0){var c=i.value;r.push(c)}}catch(e){s=!0,l=e}finally{try{!a&&d.return&&d.return()}finally{if(s)throw l}}var u=r.sort(),w=!0,f=!1,y=void 0;try{for(var p,v=u[Symbol.iterator]();!(w=(p=v.next()).done);w=!0){var g=p.value,T=e[g];n.append(g,T)}}catch(e){f=!0,y=e}finally{try{!w&&v.return&&v.return()}finally{if(f)throw y}}t=n}else{var x=[],h="",O=!0,b=!1,L=void 0;try{for(var m,S=Object.keys(e)[Symbol.iterator]();!(O=(m=S.next()).done);O=!0){var j=m.value;x.push(j)}}catch(e){b=!0,L=e}finally{try{!O&&S.return&&S.return()}finally{if(b)throw L}}var P=x.sort(),_=!0,q=!1,$=void 0;try{for(var E,G=P[Symbol.iterator]();!(_=(E=G.next()).done);_=!0){var M=E.value;h+=M+"="+e[M]+"&"}}catch(e){q=!0,$=e}finally{try{!_&&G.return&&G.return()}finally{if(q)throw $}}var R=h.length-1;t=h.substr(0,R)}return t}function t(e){var t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(e.type=(e.type||"POST").toUpperCase(),e.dataType=e.dataType||"json",e.async=e.async||!0,e.data=e.data||{},e.toast=e.toast||"true",e.vload=e.vload||"false",e.requestDataType=e.requestDataType||"string",!e.success||"false"==e.success||"function"!=typeof e.success)return new Promise(function(n,r){if("GET"===e.type){var a=o(e.data,"GET"),s=""==a?e.url:e.url+"?"+encodeURI(a);t.open("GET",s,e.async),t.send(),"true"==e.vload&&(window.vload?window.vload.$load.show():window.insertLoad?window.insertLoad():console.log("发起统一的loading"))}else if("POST"===e.type){var l="string"===e.requestDataType?JSON.stringify(e.data):e.data;t.open("POST",e.url,e.async),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send(l),"true"==e.vload&&(window.vload?window.vload.$load.show():window.insertLoad?window.insertLoad():console.log("发起统一的loading"))}t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status)if("true"==e.vload&&(window.vload?window.vload.$load.hide():window.deleteLoad?window.deleteLoad():console.log("移除统一的loading")),t.responseText){var o=t.responseText,a=o;try{a=JSON.parse(t.responseText),a.success||"true"==e.toast&&(window.vm?window.vm.$toast(a.msg):window.insertToast?window.insertToast():console.log("统一的toast")),n(a)}catch(e){a=t.responseText,n(a)}finally{a=t.responseText,n(a)}}else console.log("error1"),r(t.status);else if(e.error)console.log("error2"),e.error(t);else if(console.log("error3"),window._Log)try{window._Log.Crash(t.responseText,{mark:e.url})}catch(e){console.log(e)}finally{console.log("try _log")}}});if("GET"===e.type){var n=o(e.data,"GET"),r=""==n?e.url:e.url+"?"+encodeURI(n);t.open("GET",r,e.async),t.send(),"true"==e.vload&&(window.vload?window.vload.$load.show():window.insertLoad?window.insertLoad():console.log("发起统一的loading"))}else if("POST"===e.type){var a="string"===e.requestDataType?JSON.stringify(e.data):e.data;t.open("POST",e.url,e.async),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send(a),"true"==e.vload&&(window.vload?window.vload.$load.show():window.insertLoad?window.insertLoad():console.log("发起统一的loading"))}t.onreadystatechange=function(){if(4===t.readyState)if("true"==e.vload&&(window.vload?window.vload.$load.hide():window.deleteLoad?window.deleteLoad():console.log("移除统一的loading")),200===t.status)t.responseText?e.success&&e.success(JSON.parse(t.responseText)):console.log("request.responseText不存在");else if(e.error)e.error(t);else if(console.log("error3"),window._Log)try{window._Log.Crash(t.responseText,{mark:e.url})}catch(e){console.log(e)}finally{console.log("try _log")}}}arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.prototype.$ajax=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("[object Object]"===Object.prototype.toString.call(e))return t(e)}},o.default=n}])});
//# sourceMappingURL=vxajax.js.map