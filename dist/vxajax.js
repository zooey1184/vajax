!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("vxajax",[],t):"object"==typeof exports?exports.vxajax=t():e.vxajax=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(o[r])return o[r].exports;var n=o[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,r){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=0)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};r.install=function(e){function t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST",o=null;if("POST"==t){var r=new FormData,n=[],a=!0,l=!1,i=void 0;try{for(var s,d=Object.keys(e)[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var u=s.value;n.push(u)}}catch(e){l=!0,i=e}finally{try{!a&&d.return&&d.return()}finally{if(l)throw i}}var c=n.sort(),f=!0,y=!1,p=void 0;try{for(var v,w=c[Symbol.iterator]();!(f=(v=w.next()).done);f=!0){var g=v.value,x=e[g];r.append(g,x)}}catch(e){y=!0,p=e}finally{try{!f&&w.return&&w.return()}finally{if(y)throw p}}o=r}else{var h=[],T="",b=!0,j=!1,m=void 0;try{for(var O,S=Object.keys(e)[Symbol.iterator]();!(b=(O=S.next()).done);b=!0){var L=O.value;h.push(L)}}catch(e){j=!0,m=e}finally{try{!b&&S.return&&S.return()}finally{if(j)throw m}}var P=h.sort(),_=!0,q=!1,M=void 0;try{for(var $,D=P[Symbol.iterator]();!(_=($=D.next()).done);_=!0){var H=$.value;T+=H+"="+e[H]+"&"}}catch(e){q=!0,M=e}finally{try{!_&&D.return&&D.return()}finally{if(q)throw M}}var R=T.length-1;o=T.substr(0,R)}return o}function o(e){var o=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return e.type=(e.type||"POST").toUpperCase(),e.dataType=e.dataType||"json",e.async=e.async||!0,e.data=e.data||{},e.toast=e.toast||"true",e.vload=e.vload||"false",e.requestDataType=e.requestDataType||"string",new Promise(function(r,n){if("GET"===e.type){var a=t(e.data,"GET"),l=""==a?e.url:e.url+"?"+encodeURI(a);o.open("GET",l,e.async),o.send(),"true"==e.vload&&(window.vload?window.vload.$load.show():window.insertLoad?window.insertLoad():console.log("发起统一的loading"))}else if("POST"===e.type){var i="string"===e.requestDataType?JSON.stringify(e.data):e.data;o.open("POST",e.url,e.async),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(i),"true"==e.vload&&(window.vload?window.vload.$load.show():window.insertLoad?window.insertLoad():console.log("发起统一的loading"))}o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status)if("true"==e.vload&&(window.vload?window.vload.$load.hide():window.deleteLoad?window.deleteLoad():console.log("移除统一的loading")),o.responseText){var t=o.responseText,a=t;try{a=JSON.parse(o.responseText),a.success||"true"==e.toast&&(window.vm?window.vm.$toast(a.msg):window.insertToast?window.insertToast():console.log("统一的toast")),r(a)}catch(e){a=o.responseText,r(a)}finally{a=o.responseText,r(a)}}else console.log("error1"),n(o.status);else if(e.error)console.log("error2"),e.error(o);else if(console.log("error3"),window._Log)try{window._Log.Crash(o.responseText,{mark:e.url})}catch(e){console.log(e)}finally{console.log("try _log")}}})}arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.prototype.$ajax=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("[object Object]"===Object.prototype.toString.call(e))return o(e)}},t.default=r}])});
//# sourceMappingURL=vxajax.js.map